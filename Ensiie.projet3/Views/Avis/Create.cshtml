@model Ensiie.projet3.Models.Avis_news_

@{
    ViewBag.Title = "Create";
}

<h2>Ecrire un avis</h2>
<h6>Vous devez saisir au moins 10 lettres</h6>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

    @if ((HttpContext.Current.Session["id"] != null) && (HttpContext.Current.Session["id_news"] != null))
    {
        using (Html.BeginForm())
        {
            @Html.ValidationSummary(true)
                                                                                                                                                                                                                            <fieldset>
        <legend>Votre avis</legend>

        <div class="editor-field">
            @Html.TextAreaFor(model => model.texte)
            @Html.ValidationMessageFor(model => model.texte)
        </div>

        @Html.HiddenFor(model => model.news_id, new { Value = HttpContext.Current.Session["id_news"] })
        @Html.HiddenFor(model => model.collaborateur_id, new { Value = HttpContext.Current.Session["id"] })

        <p>
            <input type="submit" value="Créer" />
        </p>
    </fieldset>
        }
    
    }
    
    else
    {
    <p>Variable de session [id] et [id_news] expirées</p>
    }

    @if (HttpContext.Current.Session["id_news"] != null)
    {
         <div>
            @Html.ActionLink("Retour aux news", "../News/Index", new { id = HttpContext.Current.Session["id_news"] })
        </div>   
    }
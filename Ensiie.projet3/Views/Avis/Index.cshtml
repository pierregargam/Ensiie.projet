@model IEnumerable<Ensiie.projet3.Models.Avis_news_>

<h2>Avis</h2>
 
@if (Model.Count() == 0)
{
    <p>Il n'y a aucun avis.</p>
}

else
{          
    
    foreach (var item in Model)
    {
        Ensiie.projet3.Models.access a = new Ensiie.projet3.Models.access();
        <p><table width="50%">
        <tbody><tr><td>

        New: <font color="#ff3030" >@Html.DisplayFor(modelItem => item.News.texte)</font><br />
        Avis: @Html.DisplayFor(modelItem => item.texte)<br />
        Auteur: @Html.DisplayFor(modelItem => item.Agent.name)<br />
        Posté le: @Html.DisplayFor(modelItem => item.News.dating.Value)

        <BR /><BR /><strong><article>
            @Html.DisplayFor(modelItem => item.texte)
        </article></strong><BR>

            @if (
                (HttpContext.Current.Session["log_admin"] != null && (int)HttpContext.Current.Session["log_admin"] == 1)
                ||
                (a.verif_agent_has_avis(item.id, (int)HttpContext.Current.Session["id"]))
                )
                {
                    @Html.ActionLink(" ", "Delete", new { id = item.id }, new { @class = "classname" })
                }
        </td></tr></tbody></table></p>
    }
}

@if (HttpContext.Current.Session["id_news"] != null)
{
    <div><BR>
        @Html.ActionLink("Retour aux news", "../News/Index", new { id = HttpContext.Current.Session["id_news"] })
    </div>   
}
@model Ensiie.projet3.Models.Commentaire_

@{
    ViewBag.Title = "Create";
}

<h2>Ecrire un commentaire</h2>
<h6>Vous devez saisir au moins 10 lettres</h6>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

    @if ((HttpContext.Current.Session["id"] != null) && (HttpContext.Current.Session["id_message"] != null) && (HttpContext.Current.Session["id_theme"] != null))
    {
        using (Html.BeginForm())
        {
            @Html.ValidationSummary(true)
                                                                                                                                                                                                                            <fieldset>
        <legend>Commentaire</legend>

        <div class="editor-field">
            @Html.TextAreaFor(model => model.texte)
            @Html.ValidationMessageFor(model => model.texte)
        </div>

        @Html.HiddenFor(model => model.dating, new { Value = DateTime.Now.ToString("yyyy-MM-dd HH:mm:ss") })
        @Html.HiddenFor(model => model.theme_id, new { Value = HttpContext.Current.Session["id_theme"] })
        @Html.HiddenFor(model => model.message_id, new { Value = HttpContext.Current.Session["id_message"] })
        @Html.HiddenFor(model => model.collaborateur_id, new { Value = HttpContext.Current.Session["id"] })

        <p>
            <input type="submit" value="Créer" />
        </p>
    </fieldset>
        }
    
    }
    
    else
    {
    <p>Variable de session [id] et [id_message] expirées</p>
    }

    @if (HttpContext.Current.Session["id_theme"] != null)
    {
         <div>
            @Html.ActionLink("Retour au messages de ce thème", "../Message/Index", new { id = HttpContext.Current.Session["id_theme"] })
        </div>   
    }